{"version":3,"file":"ionic-storage-angular.js","sources":["@ionic/storage-angular/index.ts","@ionic/storage-angular/ionic-storage-angular.ts"],"names":[],"mappings":";;;;;;;;MAQM,kBAAkB,GAAG,IAAI,cAAc,CAC3C,sBAAsB,EACtB;AAIF,MAAM,WAAY,SAAQ,OAAO;AACjC,IAAE;AACF,QAAI,KAAK,EAAE,CAAC;AACZ,KAAG;AACH,IAAQ,MAAM;AACd;AAIY,YAJR,OAAO,IAAI,CAAC;AAChB,SAAG;AACD,KADC;AACH,IAAQ,YAAY;AACpB;AAIG,SAJA;AACD,KADC;AACH,IAAE,IAAI,MAAM;AAAK,QACb,OAAO,MAAM,CAAC;AAClB,KAAG;AACH,IAAQ,GAAG,CAAC,GAAW;AAAI,8DAAA,OAAO,IAAI,CAAC,EAAE;AACvC,KADuC;AACzC,IAAQ,GAAG,CAAC,GAAW,EAAE,KAAU;AAAI,+DAAC;AACtC,KADsC;AACxC,IAAQ,MAAM,CAAC,GAAW;AAAI,+DAAe;AAC3C,KAD2C;AAC7C,IAAQ,KAAK;AAAK,+DAAgB;AAChC,KADgC;AAClC,IAAQ,MAAM;AAAK,8DAAiB,OAAO,CAAC,CAAC,EAAE;AAC7C,KAD6C;AAC/C,IAAQ,IAAI;AAAK,8DAAA,OAAO,EAAE,CAAA,EAAE;AAC1B,KAD0B;AAC5B,IAAQ,OAAO,CAAC,gBAA2E;AAAI,+DAAgB;AAC7G,KAD6G;AAC/G,IAAE,gBAAgB,CAAC,GAAW,KAAK;AACnC,CAAC;AACD,SACgB,cAAc,CAC5B,aAA4B;AAC3B,IACD,IAAI,gBAAgB,CAAC,IAAI,CAAC,UAAU,CAAC,EAAE;AACzC;AACI,QAAA,OAAO,IAAI,WAAW,EAAE,CAAC;AAC7B,KAAG;AACH,IACE,OAAO,IAAI,OAAO,CAAC,aAAa,CAAC,CAAC;AACpC,CAAC;AACD,IAEa,kBAAkB,0BAA/B,MAAa,kBAAkB;AAC/B,IAAE,OAAO,OAAO,CAAC,gBAA+B,IAAI;AAAI,QACpD,OAAO;AACX,YAAM,QAAQ,EAAE,oBAAkB;AAClC,YAAM,SAAS,EAAE;AACjB,gBAAQ,EAAE,OAAO,EAAE,kBAAkB,EAAE,QAAQ,EAAE,aAAa,EAAE;AAChE,gBAAQ;AACR,oBAAU,OAAO,EAAE,OAAO;AAC1B,oBAAU,UAAU,EAAE,cAAc;AACpC,oBAAU,IAAI,EAAE,CAAC,kBAAkB,CAAC;AACpC,iBAAS;AACT,aAAO;AACP,SAAK,CAAC;AACN,KAAG;AACH,EAAC;AAdY,kBAAkB,2CAD9B,QAAQ,EAAE,IACE,kBAAkB,CAc9B;;;;;0BACD;AAAC;AC/DD;AACA;AACA;AACA;AACA;AAC0C","sourcesContent":["import { NgModule, ModuleWithProviders, PLATFORM_ID, InjectionToken } from '@angular/core';\n\nimport {\n  Storage,\n  StorageConfig\n} from '@ionic/storage';\nimport { isPlatformServer } from '@angular/common';\n\nconst StorageConfigToken = new InjectionToken<any>(\n  'STORAGE_CONFIG_TOKEN'\n);\n\nexport { StorageConfig, StorageConfigToken, Storage };\n\nclass NoopStorage extends Storage {\n  constructor() {\n    super();\n  }\n  async create() {\n    return this;\n  }\n  async defineDriver() {\n  }\n  get driver(): string | null {\n    return 'noop';\n  }\n  async get(key: string) { return null; }\n  async set(key: string, value: any) { }\n  async remove(key: string): Promise<any> { }\n  async clear(): Promise<void> { }\n  async length(): Promise<number> { return 0; }\n  async keys() { return [] }\n  async forEach(iteratorCallback: (value: any, key: string, iterationNumber: Number) => any): Promise<void> { }\n  setEncryptionKey(key: string) { }\n}\n\nexport function provideStorage(\n  storageConfig: StorageConfig\n): Storage {\n  if (isPlatformServer(this.platformId)) {\n    // When running in a server context return the NoopStorage\n    return new NoopStorage();\n  }\n\n  return new Storage(storageConfig);\n}\n\n@NgModule()\nexport class IonicStorageModule {\n  static forRoot(storageConfig: StorageConfig = null): ModuleWithProviders<IonicStorageModule> {\n    return {\n      ngModule: IonicStorageModule,\n      providers: [\n        { provide: StorageConfigToken, useValue: storageConfig },\n        {\n          provide: Storage,\n          useFactory: provideStorage,\n          deps: [StorageConfigToken]\n        }\n      ]\n    };\n  }\n}\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './index';\n"]}