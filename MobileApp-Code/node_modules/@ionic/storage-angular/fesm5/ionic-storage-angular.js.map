{"version":3,"file":"ionic-storage-angular.js","sources":["ng://@ionic/storage-angular/index.ts","ng://@ionic/storage-angular/ionic-storage-angular.ts"],"sourcesContent":["import { NgModule, ModuleWithProviders, PLATFORM_ID, InjectionToken } from '@angular/core';\n\nimport {\n  Storage,\n  StorageConfig\n} from '@ionic/storage';\nimport { isPlatformServer } from '@angular/common';\n\nconst StorageConfigToken = new InjectionToken<any>(\n  'STORAGE_CONFIG_TOKEN'\n);\n\nexport { StorageConfig, StorageConfigToken, Storage };\n\nclass NoopStorage extends Storage {\n  constructor() {\n    super();\n  }\n  async create() {\n    return this;\n  }\n  async defineDriver() {\n  }\n  get driver(): string | null {\n    return 'noop';\n  }\n  async get(key: string) { return null; }\n  async set(key: string, value: any) { }\n  async remove(key: string): Promise<any> { }\n  async clear(): Promise<void> { }\n  async length(): Promise<number> { return 0; }\n  async keys() { return [] }\n  async forEach(iteratorCallback: (value: any, key: string, iterationNumber: Number) => any): Promise<void> { }\n  setEncryptionKey(key: string) { }\n}\n\nexport function provideStorage(\n  storageConfig: StorageConfig\n): Storage {\n  if (isPlatformServer(this.platformId)) {\n    // When running in a server context return the NoopStorage\n    return new NoopStorage();\n  }\n\n  return new Storage(storageConfig);\n}\n\n@NgModule()\nexport class IonicStorageModule {\n  static forRoot(storageConfig: StorageConfig = null): ModuleWithProviders<IonicStorageModule> {\n    return {\n      ngModule: IonicStorageModule,\n      providers: [\n        { provide: StorageConfigToken, useValue: storageConfig },\n        {\n          provide: Storage,\n          useFactory: provideStorage,\n          deps: [StorageConfigToken]\n        }\n      ]\n    };\n  }\n}\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './index';\n"],"names":[],"mappings":";;;;;;IAQM,kBAAkB,GAAG,IAAI,cAAc,CAC3C,sBAAsB,EACtB;AAIF;IAA0B,+BAAO;IAC/B;eACE,iBAAO;KACR;IACK,4BAAM,GAAZ;;;gBACE,sBAAO,IAAI,EAAC;;;KACb;IACK,kCAAY,GAAlB;;;;;;KACC;IACD,sBAAI,+BAAM;aAAV;YACE,OAAO,MAAM,CAAC;SACf;;;OAAA;IACK,yBAAG,GAAT,UAAU,GAAW;;YAAI,sBAAO,IAAI,EAAC;;KAAE;IACjC,yBAAG,GAAT,UAAU,GAAW,EAAE,KAAU;;;;KAAK;IAChC,4BAAM,GAAZ,UAAa,GAAW;;;;KAAmB;IACrC,2BAAK,GAAX;;;;KAAgC;IAC1B,4BAAM,GAAZ;;YAAkC,sBAAO,CAAC,EAAC;;KAAE;IACvC,0BAAI,GAAV;;YAAe,sBAAO,EAAE,EAAA;;KAAE;IACpB,6BAAO,GAAb,UAAc,gBAA2E;;;;KAAoB;IAC7G,sCAAgB,GAAhB,UAAiB,GAAW,KAAK;IACnC,kBAAC;AAAD,CApBA,CAA0B,OAAO,GAoBhC;SAEe,cAAc,CAC5B,aAA4B;IAE5B,IAAI,gBAAgB,CAAC,IAAI,CAAC,UAAU,CAAC,EAAE;;QAErC,OAAO,IAAI,WAAW,EAAE,CAAC;KAC1B;IAED,OAAO,IAAI,OAAO,CAAC,aAAa,CAAC,CAAC;AACpC,CAAC;;IAGD;KAcC;2BAdY,kBAAkB;IACtB,0BAAO,GAAd,UAAe,aAAmC;QAAnC,8BAAA,EAAA,oBAAmC;QAChD,OAAO;YACL,QAAQ,EAAE,oBAAkB;YAC5B,SAAS,EAAE;gBACT,EAAE,OAAO,EAAE,kBAAkB,EAAE,QAAQ,EAAE,aAAa,EAAE;gBACxD;oBACE,OAAO,EAAE,OAAO;oBAChB,UAAU,EAAE,cAAc;oBAC1B,IAAI,EAAE,CAAC,kBAAkB,CAAC;iBAC3B;aACF;SACF,CAAC;KACH;;IAbU,kBAAkB;QAD9B,QAAQ,EAAE;OACE,kBAAkB,CAc9B;IAAD,yBAAC;CAdD;;AChDA;;;;;;"}